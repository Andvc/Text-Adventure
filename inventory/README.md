# 背包模块

背包模块负责管理玩家在游戏中获得的各类物品，包括物品的获取、使用、丢弃和交易等功能。

## 功能概述

- 物品系统：定义游戏中各类物品的属性和效果
- 背包管理：存储和整理玩家获得的物品
- 物品交互：使用、装备、丢弃物品的功能
- 重量系统：根据物品重量限制携带数量
- 分类系统：物品的分类和快速查找
- 交易系统：与NPC进行物品交易

## 设计思路

### 物品类型设计

游戏中的物品可分为以下几类：
- **消耗品**：一次性使用物品，如药水、食物、卷轴
- **装备**：穿戴在角色身上提供属性加成的物品，如武器、防具
- **任务物品**：与剧情和任务相关的特殊物品
- **收藏品**：无实际用途但可能有特殊意义的物品
- **材料**：用于合成其他物品的原材料
- **货币**：用于交易的通用物品

### 数据结构

```
物品{
    物品ID: 唯一标识符,
    名称: 物品名称,
    描述: 物品描述,
    类型: [消耗品/装备/任务物品/收藏品/材料/货币],
    重量: 数值,
    价值: 数值,
    堆叠上限: 数值,  // 同类物品可以堆叠的最大数量
    使用效果: {
        效果类型: [恢复/伤害/属性加成/状态影响],
        效果数值: 数值,
        持续时间: 数值  // 0表示永久或一次性
    },
    装备位置: [头部/身体/手部/脚部/饰品]  // 仅装备类物品
}

背包{
    物品栏: [
        {物品ID, 数量, 装备状态}
    ],
    最大容量: 数值,
    当前重量: 数值,
    最大重量: 数值
}
```

### 物品交互机制

- **获取物品**：通过拾取、任务奖励、购买等方式获得物品
- **使用物品**：消耗品使用后产生效果并减少数量
- **装备物品**：装备类物品可以穿戴，提供持续的属性加成
- **丢弃物品**：从背包中移除物品，可能用于解谜或清理空间
- **交易物品**：与商人或NPC交换物品或货币

## 接口设计

### 对外接口

- `add_item(item_id, quantity)`: 添加物品到背包
- `remove_item(item_id, quantity)`: 从背包移除物品
- `use_item(item_id)`: 使用指定物品
- `equip_item(item_id)`: 装备指定物品
- `unequip_item(equipment_slot)`: 卸下指定装备位置的物品
- `get_inventory_contents()`: 获取背包内容
- `get_item_details(item_id)`: 获取特定物品的详细信息
- `can_carry(item_id, quantity)`: 检查是否能携带指定数量的物品

### 对内接口

- `_apply_item_effect(effect)`: 应用物品效果
- `_calculate_total_weight()`: 计算背包总重量
- `_sort_inventory(criteria)`: 按指定条件整理背包
- `_get_equipped_items()`: 获取当前装备的所有物品
- `_validate_item_use(item_id)`: 验证物品是否可使用

## 与其他模块的交互

- **剧情模块**：物品可能影响剧情选择或触发特殊事件
- **角色模块**：装备和物品效果会影响角色属性
- **存档模块**：需要保存完整的背包状态

## 待实现功能

- [ ] 物品数据结构设计
- [ ] 基础背包管理功能
- [ ] 物品使用和效果系统
- [ ] 装备系统
- [ ] 重量和容量限制
- [ ] 物品分类和排序 