[MODE: RESEARCH]

让我先分析一下当前代码库的结构和需求：

1. 首先查看一下当前的目录结构：


Ran tool
让我们看看 `gameflow` 目录的内容：


Ran tool
让我们看看 `storyline` 目录的内容：


Ran tool
让我们看看 `storyline/templates` 目录的内容：


Ran tool
基于以上分析，我提出以下研究问题和观察：

1. 游戏进程模块设计：
   - 需要创建一个新的模块来管理游戏进程，建议放在 `gameflow` 目录下
   - 需要设计一个 `GameProgress` 类来管理年龄推进和事件触发
   - 需要设计一个事件系统来存储和处理各种事件

2. 事件模块设计：
   - 需要创建一个新的事件模板系统，建议放在 `storyline/templates/events` 目录下
   - 每个事件模板应该包含：
     - 事件触发条件（年龄范围、概率等）
     - 事件内容生成
     - 事件结果处理

3. 事件选择模块设计：
   - 需要创建一个事件选择器，根据年龄和概率选择合适的事件
   - 需要考虑事件的权重和优先级
   - 需要处理事件的互斥和依赖关系

4. 数据存储设计：
   - 需要设计一个结构来存储游戏进程状态
   - 需要设计一个结构来存储已触发的事件历史
   - 需要设计一个结构来存储事件的结果和影响

5. 与现有系统的集成：
   - 需要与 `background_creation` 模块集成，在游戏开始时生成背景
   - 需要与 `storyline_manager` 集成，用于生成事件内容
   - 需要与存档系统集成，保存游戏进程状态

您觉得这个分析方向如何？我们是否需要更详细地研究某个特定方面？
